<!-- ساعت کاری مغازه -->
<div id="work-clock-card" style="width:300px; margin:auto; text-align:center; font-family:Tahoma, sans-serif;">
    <h2 style="margin-bottom:10px;">ساعت کاری مغازه</h2>

    <!-- ساعت عقربه‌ای -->
    <div id="analog-clock" style="position:relative; width:200px; height:200px; margin:auto; border:4px solid #000; border-radius:50%; background:#fff;">
        <div class="hand hour" style="width:6px; height:50px; background:#000; position:absolute; bottom:50%; left:50%; transform-origin:50% 100%; transform:rotate(0deg);"></div>
        <div class="hand minute" style="width:4px; height:70px; background:#000; position:absolute; bottom:50%; left:50%; transform-origin:50% 100%; transform:rotate(0deg);"></div>
        <div class="hand second" style="width:2px; height:90px; background:red; position:absolute; bottom:50%; left:50%; transform-origin:50% 100%; transform:rotate(0deg);"></div>
        <div style="width:12px; height:12px; background:#000; border-radius:50%; position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);"></div>
    </div>

    <!-- ساعت دیجیتال و تاریخ -->
    <div id="digital-clock" style="margin-top:10px; font-size:18px;"></div>
    <div id="date-display" style="margin-top:5px; font-size:16px; color:#555;"></div>
    <div id="shop-status" style="margin-top:8px; font-size:16px; font-weight:bold;"></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/dayjs@1/dayjs.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/dayjs@1/plugin/jalali.js"></script>
<script>
dayjs.extend(window.dayjs_plugin_jalali);

function updateClock() {
    const now = dayjs();
    const hour = now.hour();
    const minute = now.minute();
    const second = now.second();
    const month = now.jMonth() + 1; // شمسی
    const day = now.jDate();
    const weekday = now.format('dddd');
    const year = now.jYear();

    // بروزرسانی ساعت دیجیتال
    document.getElementById('digital-clock').innerText = now.format('HH:mm:ss');

    // بروزرسانی تاریخ شمسی
    document.getElementById('date-display').innerText = ${weekday} ${day} ${month} ${year};

    // ساعت کاری مغازه بر اساس فصل و روز
    const season = (month >= 1 && month <= 3) ? 'زمستان و پاییز' : 'بهار و تابستان'; // ساده‌سازی
    const dayOfWeek = now.day(); // یکشنبه=0 ... شنبه=6
    let openHourStart, openHourEnd;

    if(dayOfWeek === 5) { // جمعه تعطیل
        document.getElementById('shop-status').innerText = 'تعطیل';
        document.getElementById('shop-status').style.color = 'red';
    } else {
        if(season === 'بهار و تابستان') {
            openHourStart = 9; 
            openHourEnd = (hour < 12 ? 13 : 20.5); // بعد ظهر 4 تا 8:30
        } else {
            openHourStart = 9; 
            openHourEnd = (hour < 12 ? 13 : 19.5); // بعد ظهر 4 تا 7:30
        }

        let statusText = '';
        if(hour + minute/60 >= openHourStart && hour + minute/60 <= openHourEnd){
            document.getElementById('shop-status').innerText = 'باز هستیم';
            document.getElementById('shop-status').style.color = 'green';
        } else {
            document.getElementById('shop-status').innerText = 'تا باز شدن مغازه باقی مانده';
            document.getElementById('shop-status').style.color = 'red';
        }
    }

    // بروزرسانی عقربه‌ها
    const hourDeg = ((hour % 12) + minute/60) * 30;
    const minDeg = (minute + second/60) * 6;
    const secDeg = second * 6;

    document.querySelector('.hand.hour').style.transform = rotate(${hourDeg}deg);
    document.querySelector('.hand.minute').style.transform = rotate(${minDeg}deg);
    document.querySelector('.hand.second').style.transform = rotate(${secDeg}deg);
}

setInterval(updateClock, 1000);
updateClock();
</script>
