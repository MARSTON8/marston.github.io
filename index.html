<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ù…Ú©Ø§Ù†ÛŒÚ©ÛŒ Ùˆ ØªØ¹ÙˆÛŒØ¶ Ø±ÙˆØºÙ†ÛŒ Ø§Ù…ÛŒØ¯ÙˆØ§Ø±ÛŒ</title>
  <style>
    @import url('https://v1.fontapi.ir/css/Sahel');

    body {
      font-family: 'Sahel', sans-serif;
      margin: 0;
      padding: 0;
      background: #ffffff;
      color: #222;
      transition: background 0.5s, color 0.5s;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 20px;
      background: rgba(0,0,0,0.05);
      position: sticky; /* Ø«Ø§Ø¨Øª Ø¨Ø§Ù„Ø§ */
      top: 0;
      z-index: 1000;
      transition: background 0.5s, color 0.5s;
    }

    .title {
      font-size: 20px;
      font-weight: bold;
    }

    .clock {
      font-size: 16px;
    }

    main {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      padding: 20px;
    }

    .card {
      background: #f8f8f8;
      padding: 20px;
      border-radius: 15px;
      text-align: center;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      transition: transform 0.3s;
    }

    .card:hover {
      transform: translateY(-5px);
    }

    .card img {
      width: 60px;
      height: 60px;
      margin-bottom: 10px;
    }

    /* Ø­Ø§Ù„Øª Ø´Ø¨ */
    body.night {
      background: #1c2a3a; /* Ø³Ø±Ù…Ù‡â€ŒØ§ÛŒ ØªÙ„Ú¯Ø±Ø§Ù…ÛŒ */
      color: #eee;
    }

    body.night .card {
      background: #243447;
      color: #fff;
    }

    body.night header {
      background: #152236; /* Ø³Ø±Ù…Ù‡â€ŒØ§ÛŒ Ù¾Ø±Ø±Ù†Ú¯ */
      color: #fff;
    }

    /* Ø¯Ú©Ù…Ù‡ Ø­Ø¨Ø§Ø¨ÛŒ ØªØºÛŒÛŒØ± ØªÙ… */
    .theme-bubble {
      position: fixed;
      bottom: 20px;
      left: 20px;
      background: #0078ff;
      color: #fff;
      width: 55px;
      height: 55px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
      font-size: 22px;
      z-index: 1001;
    }

    /* Ù…Ù†ÙˆÛŒ ØªÙ… */
    .theme-menu {
      position: fixed;
      bottom: 80px;
      left: 20px;
      background: #fff;
      border-radius: 10px;
      padding: 10px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
      display: flex;
      flex-direction: column;
      gap: 10px;
      z-index: 1001;

      opacity: 0;             /* Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ù…Ø®ÙÛŒ */
      pointer-events: none;   /* Ú©Ù„ÛŒÚ©â€ŒÙ¾Ø°ÛŒØ± Ù†Ø¨Ø§Ø´Ù‡ */
      transition: opacity 0.4s ease; /* Ø§Ù†ÛŒÙ…ÛŒØ´Ù† fade */
    }

    .theme-menu.show {
      opacity: 1;
      pointer-events: auto;   /* Ú©Ù„ÛŒÚ©â€ŒÙ¾Ø°ÛŒØ± Ø¨Ø´Ù‡ */
    }

    .theme-menu button {
      background: none;
      border: none;
      font-size: 20px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <header>
    <div class="title">Ù…Ú©Ø§Ù†ÛŒÚ©ÛŒ Ùˆ ØªØ¹ÙˆÛŒØ¶ Ø±ÙˆØºÙ†ÛŒ Ø§Ù…ÛŒØ¯ÙˆØ§Ø±ÛŒ</div>
    <div class="clock" id="clock"></div>
  </header>

  <main>
<a href="reserve.html" class="card">
   <img src="https://img.icons8.com/ios-filled/100/000000/phone.png" alt="Ø±Ø²Ø±Ùˆ ÙˆÙ‚Øª">
   <h3>Ø±Ø²Ø±Ùˆ ÙˆÙ‚Øª</h3>
   <p>Ø¨Ø±Ø§ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªÙ…Ø§Ø³ Ú©Ù„ÛŒÚ© Ù†Ù…Ø§ÛŒÛŒØ¯</p>
</a>

  <a href="location.html" class="card">
   <img src="https://img.icons8.com/ios-filled/100/000000/marker.png" alt="Ù„ÙˆÚ©ÛŒØ´Ù† Ù…ØºØ§Ø²Ù‡">
   <h3>Ù„ÙˆÚ©ÛŒØ´Ù† Ù…ØºØ§Ø²Ù‡</h3>
   <p>Ø¢Ø¯Ø±Ø³ Ùˆ Ù…ÙˆÙ‚Ø¹ÛŒØª Ù…Ú©Ø§Ù†ÛŒ Ù…ØºØ§Ø²Ù‡ Ù…Ø§</p>
</a>
    
  <div class="card" onclick="window.location.href='about.html'">
  <img src="https://img.icons8.com/ios-filled/100/000000/about.png" alt="About Icon">
  <h3>Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù…Ø§</h3>
  <p>Ø³ÙˆØ§Ø¨Ù‚ Ú©Ø§Ø±ÛŒ Ùˆ Ø¯Ø³ØªÚ¯Ø§Ù‡ Ù‡Ø§.</p>
</div>
    <div class="card">
      <img src="https://img.icons8.com/ios-filled/100/000000/oil-industry.png" alt="Ø±ÙˆØºÙ†">
      <h3>Ú†Ù‡ Ù†ÙˆØ¹ Ø±ÙˆØºÙ†ÛŒ Ø¨Ø±ÛŒØ²Ù…ØŸ</h3>
      <p>Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ø¨Ù‡ØªØ±ÛŒÙ† Ø±ÙˆØºÙ† Ù…ÙˆØªÙˆØ± Ø¨Ø±Ø§ÛŒ Ø®ÙˆØ¯Ø±ÙˆÛŒ Ø´Ù…Ø§.</p>
    </div>

<div class="card" onclick="window.location.href='open.html'">
  <img src="https://img.icons8.com/ios-filled/100/000000/clock.png" alt="Ø³Ø§Ø¹Øª Ú©Ø§Ø±ÛŒ">
  <h3>Ú†Ù‡ Ù…ÙˆÙ‚Ø¹ Ø¨Ø§Ø²ÛŒÙ…ØŸ</h3>
  <p>Ø³Ø§Ø¹Øª Ú©Ø§Ø±ÛŒ Ù…ØºØ§Ø²Ù‡</p>
</div>

    <div class="card">
      <img src="https://img.icons8.com/ios-filled/100/000000/information.png" alt="Ø±Ø§Ù‡Ù†Ù…Ø§">
      <h3>Ú†Ù‡ Ø²Ù…Ø§Ù†ÛŒ Ø³Ø±ÙˆÛŒØ³ Ø®ÙˆØ¯Ø±Ùˆ Ø§Ù†Ø¬Ø§Ù… Ø¯Ù‡ÛŒÙ…ØŸ</h3>
      <p>Ú†Ù‡ Ø²Ù…Ø§Ù†ÛŒ ÙÛŒÙ„ØªØ± Ù‡Ø§ Ùˆ Ø³ÛŒØ§Ù„Ø§Øª Ø®ÙˆØ¯Ø±Ùˆ Ùˆ Ù…Ø§ÛŒØ¹ Ø®Ù†Ú© Ú©Ø§Ø±ÛŒ Ø±Ø§ ØªØ¹ÙˆÛŒØ¶ Ú©Ù†ÛŒÙ…ØŸ</p>
    </div>
  </main>

  <!-- Ø¯Ú©Ù…Ù‡ Ø­Ø¨Ø§Ø¨ÛŒ -->
  <div class="theme-bubble" onclick="toggleThemeMenu()">âš™ï¸</div>

  <!-- Ù…Ù†ÙˆÛŒ ØªÙ… -->
  <div class="theme-menu" id="themeMenu">
    <button onclick="setTheme('day')">â˜€ï¸</button>
    <button onclick="setTheme('night')">ğŸŒ™</button>
    <button onclick="setTheme('auto')">âš™ï¸</button>
  </div>

  <script>
    function updateClock() {
      const now = new Date();
      const options = { hour: '2-digit', minute: '2-digit', second: '2-digit', weekday: 'long', day: 'numeric', month: 'long', year: 'numeric' };
      document.getElementById('clock').textContent = new Intl.DateTimeFormat('fa-IR', options).format(now);
    }
    setInterval(updateClock, 1000);
    updateClock();

    function setTheme(mode) {
      if (mode === 'day') {
        document.body.classList.remove('night');
        localStorage.setItem('theme', 'day');
      } else if (mode === 'night') {
        document.body.classList.add('night');
        localStorage.setItem('theme', 'night');
      } else if (mode === 'auto') {
        const hour = new Date().getHours();
        if (hour >= 18 || hour < 5) {
          document.body.classList.add('night');
        } else {
          document.body.classList.remove('night');
        }
        localStorage.setItem('theme', 'auto');
      }
    }

    function toggleThemeMenu() {
      const menu = document.getElementById('themeMenu');
      menu.classList.toggle('show'); // fade in/out
    }

    // Ø§Ø¹Ù…Ø§Ù„ ØªÙ†Ø¸ÛŒÙ… Ù‚Ø¨Ù„ÛŒ
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme) setTheme(savedTheme);
  </script>
<!-- ====== MUSIC WIDGET (paste this before </body> in index.html) ====== -->
<style>
/* widget styles (minimal, responsive) */
#music-widget{position:fixed;right:18px;bottom:18px;z-index:9999;font-family: Vazir, sans-serif}
.music-toggle{width:64px;height:64px;border-radius:50%;background:#111;display:flex;align-items:center;justify-content:center;box-shadow:0 8px 22px rgba(0,0,0,.45);cursor:pointer;color:#fff}
.music-toggle img{width:34px;height:34px}
.music-panel{position:absolute;right:0;bottom:82px;width:320px;max-width:calc(100vw - 36px);background:#111;color:#fff;border-radius:12px;padding:10px;box-shadow:0 18px 50px rgba(0,0,0,.5);transform-origin:bottom right;opacity:0;visibility:hidden;transition:all .25s}
.music-panel.show{opacity:1;visibility:visible;transform:translateY(0)}
.music-row{display:flex;align-items:center;gap:10px}
.music-cover{width:56px;height:56px;border-radius:8px;background:#222;display:flex;align-items:center;justify-content:center}
.music-meta{flex:1;text-align:left}
.track-title{font-weight:700;font-size:15px;margin:0}
.track-artist{font-size:13px;color:#ddd;margin:0}
.controls{display:flex;align-items:center;justify-content:center;gap:8px;margin-top:10px}
.ctrl-btn{background:transparent;border:0;color:#fff;padding:8px 10px;border-radius:8px;cursor:pointer;font-size:18px}
.progress{height:6px;background:rgba(255,255,255,0.12);border-radius:6px;margin-top:12px;overflow:hidden}
.progress > i{display:block;height:100%;background:linear-gradient(90deg,#ffd700,#ff8c00);width:0%}
.badge-live{display:inline-block;background:#ff3b30;color:#fff;padding:4px 8px;border-radius:999px;font-size:12px;font-weight:700;margin-right:6px}
@media (max-width:460px){ .music-panel{width:92%;right:6px;bottom:78px} .music-cover{width:48px;height:48px} .music-toggle{width:56px;height:56px} }
</style>

<div id="music-widget" aria-hidden="false">
  <div class="music-toggle" id="musicToggle" title="Ù¾Ø®Ø´â€ŒÚ©Ù†Ù†Ø¯Ù‡ Ù…ÙˆØ³ÛŒÙ‚ÛŒ">
    <img src="https://img.icons8.com/?size=100&id=9P70tJJKRpAo&format=png&color=ffffff" alt="music">
  </div>

  <div class="music-panel" id="musicPanel" role="region" aria-label="Ù¾Ø®Ø´â€ŒÚ©Ù†Ù†Ø¯Ù‡ Ù…ÙˆØ³ÛŒÙ‚ÛŒ">
    <div class="music-row">
      <div class="music-cover" id="musicCover">ğŸµ</div>
      <div class="music-meta">
        <p class="track-title" id="trackTitle">--</p>
        <p class="track-artist" id="trackArtist">--</p>
      </div>
    </div>

    <div class="controls">
      <button class="ctrl-btn" id="prevBtn" title="Ù‚Ø¨Ù„ÛŒ">â®</button>
      <button class="ctrl-btn" id="playBtn" title="Ù¾Ø®Ø´/ØªÙˆÙ‚Ù">â–¶</button>
      <button class="ctrl-btn" id="nextBtn" title="Ø¨Ø¹Ø¯ÛŒ">â­</button>
      <span class="badge-live" id="liveBadge" style="display:none">Ø²Ù†Ø¯Ù‡</span>
    </div>

    <div class="progress" aria-hidden="true"><i id="progressBar"></i></div>
    <div style="display:flex;justify-content:space-between;margin-top:8px;font-size:12px;color:#ccc">
      <span id="timeCurrent">0:00</span><span id="timeTotal">0:00</span>
    </div>
  </div>
</div>

<script>
(function(){
  // --- playlist: put your uploaded files (in music/ folder) here ---
  const playlist = [
    { title: "Ø®ÙˆÙ†Ù‡", artist: "Ù…Ø¹ÛŒÙ†", url: "https://marston8.github.io/marston.github.io/music/moein-khoone.mp3" },
    { title: "Ù…Ø­Ø±Ø§Ø¨", artist: "Ø¬ÙˆØ§Ø¯ ÛŒØ³Ø§Ø±ÛŒ", url: "https://marston8.github.io/marston.github.io/music/javadyasari-mehrab.mp3" },
    { title: "ÙØ±Ù†Ú¯ÛŒØ³", artist: "Ø³ÛŒØ§ÙˆØ´", url: "https://marston8.github.io/marston.github.io/music/siavash-farangis.mp3" }
  ];
  // -----------------------------------------------------------------

  const toggle = document.getElementById('musicToggle');
  const panel = document.getElementById('musicPanel');
  const playBtn = document.getElementById('playBtn');
  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');
  const titleEl = document.getElementById('trackTitle');
  const artistEl = document.getElementById('trackArtist');
  const progressBar = document.getElementById('progressBar');
  const timeCurrent = document.getElementById('timeCurrent');
  const timeTotal = document.getElementById('timeTotal');
  const liveBadge = document.getElementById('liveBadge');

  // audio
  let audio = new Audio();
  audio.preload = "metadata";
  audio.crossOrigin = "anonymous";
  let idx = Number(localStorage.getItem('player_idx') || 0);
  let playing = false;

  function loadTrack(i){
    idx = (i + playlist.length) % playlist.length;
    localStorage.setItem('player_idx', idx);
    audio.src = playlist[idx].url;
    titleEl.textContent = playlist[idx].title;
    artistEl.textContent = playlist[idx].artist;
    // hide live badge (we're playing local tracks) â€” if using live stream set true
    liveBadge.style.display = 'none';
    audio.load();
  }

  function play(){
    audio.play().then(()=> {
      playing = true;
      playBtn.textContent = 'â¸';
      toggle.classList.add('playing');
    }).catch(err=>{
      // autoplay block: user must interact
      console.warn('Ù¾Ø®Ø´ Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ù„Ø§Ú© Ø´Ø¯:', err);
      playing = false;
      playBtn.textContent = 'â–¶';
      panel.classList.add('show');
    });
  }
  function pause(){ audio.pause(); playing=false; playBtn.textContent='â–¶'; toggle.classList.remove('playing'); }

  playBtn.addEventListener('click', ()=>{
    if(!audio.src) loadTrack(idx);
    if(playing) pause(); else play();
  });
  prevBtn.addEventListener('click', ()=>{ loadTrack(idx-1); if(playing) play(); });
  nextBtn.addEventListener('click', ()=>{ loadTrack(idx+1); if(playing) play(); });

  // time update
  audio.addEventListener('timeupdate', ()=>{
    if(audio.duration){ 
      const pct = (audio.currentTime / audio.duration) * 100;
      progressBar.style.width = pct + '%';
      timeCurrent.textContent = formatTime(audio.currentTime);
      timeTotal.textContent = formatTime(audio.duration);
    }
  });
  audio.addEventListener('ended', ()=>{ loadTrack(idx+1); play(); });

  function formatTime(s){
    const m = Math.floor(s/60); const sec = Math.floor(s%60).toString().padStart(2,'0');
    return m + ':' + sec;
  }

  // toggle panel
  toggle.addEventListener('click', ()=>{ panel.classList.toggle('show'); });

  // click outside closes
  document.addEventListener('click', (e)=>{
    if(!e.target.closest('#music-widget')) panel.classList.remove('show');
  });

  // init
  loadTrack(idx);
  // if previously playing, don't autoplay (browser policy) but UI reflects selected track
  if(localStorage.getItem('player_playing')==='1'){ /* user had been playing before */ }

  // Save playing state
  window.addEventListener('beforeunload', ()=> localStorage.setItem('player_playing', playing ? '1' : '0') );

})();
</script>
<!-- ====== END MUSIC WIDGET ====== -->
</body>
</html>
